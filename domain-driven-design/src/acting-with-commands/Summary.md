## Summary

在本章中，我们了解了如何将用户的意图表示为发送给系统的命令。我们了解了如何处理这些命令，演示了命令处理程序模式的几个示例，然后讨论了 application service。

我们研究了 API 版本控制；虽然它与本章的主题没有直接关系，但是实践太重要了，不能忽视。我们将在第10章 Event Sourcing 中讨论版本控制主题。

在这一章中，我们的 application service 不断发展壮大，我们使用了 c# 的最新特性，这是来自 函数式编程 世界的礼物，叫做高级模式匹配。我们使用这个特性来简化 application service interface，它最终只有一个方法。通过这样做，我们还可以使用组合（另一种函数式风格）将命令的处理与操作关注点（如日志记录和重试）联系起来。我们还将研究这如何帮助我们校验命令的有效性。

在下一章中，我们将进一步研究实体持久化。我们将了解需要处理哪些类型的一致性，以及理解一致性边界的重要性。